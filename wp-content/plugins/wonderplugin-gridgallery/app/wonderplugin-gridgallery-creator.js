/** Wonderplugin Grid Gallery Plugin Free Version
 * Copyright 2015 Magic Hills Pty Ltd All Rights Reserved
 * Website: http://www.wonderplugin.com
 * Version 3.3 
 */
(function($){$(document).ready(function(){$(".wonderplugin-gridgallery-engine").css({display:"none"});$("#wonderplugin-gridgallery-toolbar").find("li").each(function(index){$(this).click(function(){if($(this).hasClass("wonderplugin-tab-buttons-selected"))return;$(this).parent().find("li").removeClass("wonderplugin-tab-buttons-selected");if(!$(this).hasClass("laststep"))$(this).addClass("wonderplugin-tab-buttons-selected");$("#wonderplugin-gridgallery-tabs").children("li").removeClass("wonderplugin-tab-selected");
$("#wonderplugin-gridgallery-tabs").children("li").eq(index).addClass("wonderplugin-tab-selected");$("#wonderplugin-gridgallery-tabs").removeClass("wonderplugin-tabs-grey");if(index==4)previewGridgallery();else if(index==5)publishGridgallery()})});var getURLParams=function(href){var result={};if(href.indexOf("?")<0)return result;var params=href.substring(href.indexOf("?")+1).split("&");for(var i=0;i<params.length;i++){var value=params[i].split("=");if(value&&value.length==2&&value[0].toLowerCase()!=
"v")result[value[0].toLowerCase()]=value[1]}return result};var slideDialog=function(dialogType,onSuccess,data,dataIndex){var dialogTitle=["image","video","Youtube Video","Vimeo Video","Dailymotion Video"];var dialogCode="<div class='wonderplugin-dialog-container'>"+"<div class='wonderplugin-dialog-bg'></div>"+"<div class='wonderplugin-dialog'>"+"<h3 id='wonderplugin-dialog-title'></h3>"+"<div class='error' id='wonderplugin-dialog-error' style='display:none;'></div>"+"<table id='wonderplugin-dialog-form'>";
if(dialogType==2||dialogType==3||dialogType==4)dialogCode+="<tr>"+"<th>Enter video URL</th>"+"<td><input name='wonderplugin-dialog-video' type='text' id='wonderplugin-dialog-video' value='' class='regular-text' /> <input type='button' class='button' id='wonderplugin-dialog-select-video' value='Enter' /></td>"+"</tr>"+"<tr>";dialogCode+="<tr>"+"<th>Enter"+(dialogType>0?" poster":"")+" image URL</th>"+"<td><input name='wonderplugin-dialog-image' type='text' id='wonderplugin-dialog-image' value='' class='regular-text' /> or <input type='button' class='button' data-textid='wonderplugin-dialog-image' id='wonderplugin-dialog-select-image' value='Upload' /></td>"+
"</tr>"+"<tr id='wonderplugin-dialog-image-display-tr' style='display:none;'>"+"<th></th>"+"<td><img id='wonderplugin-dialog-image-display' style='width:80px;height:80px;' /></td>"+"</tr>"+"<tr>"+"<th>Thumbnail URL</th>"+"<td>"+"<input name='wonderplugin-dialog-thumbnail' type='text' id='wonderplugin-dialog-thumbnail' value='' class='regular-text' /> or <input type='button' class='button' data-textid='wonderplugin-dialog-thumbnail' id='wonderplugin-dialog-select-thumbnail' value='Upload' /> <br/>"+
"<label><input name='wonderplugin-dialog-displaythumbnail' type='checkbox' id='wonderplugin-dialog-displaythumbnail' value='' checked />Use thumbnail in grid</label>"+"</td>"+"</tr>";if(dialogType==1)dialogCode+="<tr>"+"<th>MP4 video URL</th>"+"<td><input name='wonderplugin-dialog-mp4' type='text' id='wonderplugin-dialog-mp4' value='' class='regular-text' /> or <input type='button' class='button' data-textid='wonderplugin-dialog-mp4' id='wonderplugin-dialog-select-mp4' value='Upload' /></td>"+"</tr>"+
"<tr>"+"<tr>"+"<th>WebM video URL (Optional)</th>"+"<td><input name='wonderplugin-dialog-webm' type='text' id='wonderplugin-dialog-webm' value='' class='regular-text' /> or <input type='button' class='button' data-textid='wonderplugin-dialog-webm' id='wonderplugin-dialog-select-webm' value='Upload' /></td>"+"</tr>"+"<tr>";dialogCode+="<tr>"+"<th>Title</th>"+"<td><input name='wonderplugin-dialog-image-title' type='text' id='wonderplugin-dialog-image-title' value='' class='large-text' /></td>"+"</tr>"+
"<tr>"+"<th>Description</th>"+"<td><textarea name='wonderplugin-dialog-image-description' type='' id='wonderplugin-dialog-image-description' value='' class='large-text' /></td>"+"</tr>";dialogCode+="<tr>"+"<th>Click to open Lightbox popup</th>"+"<td>";if(dialogType==0)dialogCode+="<label><input name='wonderplugin-dialog-lightbox' type='checkbox' id='wonderplugin-dialog-lightbox' value='' checked /> Open current "+dialogTitle[dialogType]+" in Lightbox</label><br />";dialogCode+="<label><input name='wonderplugin-dialog-lightbox-size' type='checkbox' id='wonderplugin-dialog-lightbox-size' value='' /> Set Lightbox size </label>"+
" <input name='wonderplugin-dialog-lightbox-width' type='text' id='wonderplugin-dialog-lightbox-width' value='640' class='small-text' /> / <input name='wonderplugin-dialog-lightbox-height' type='text' id='wonderplugin-dialog-lightbox-height' value='480' class='small-text' />"+"</td>"+"</tr>";if(dialogType==0)dialogCode+="<tr><th>Or click to open web link</th>"+"<td>"+"<input name='wonderplugin-dialog-weblink' type='text' id='wonderplugin-dialog-weblink' value='' class='regular-text' disabled /><br />Uncheck the option \"Open current image in Lightbox\" to enable weblink"+
"</td>"+"</tr>"+"<tr><th>Set web link target</th>"+"<td>"+"<input name='wonderplugin-dialog-linktarget' type='text' id='wonderplugin-dialog-linktarget' value='' class='regular-text' disabled />"+"</td>"+"</tr>";dialogCode+="</table>"+"<br /><br />"+"<div class='wonderplugin-dialog-buttons'>"+"<input type='button' class='button button-primary' id='wonderplugin-dialog-ok' value='OK' />"+"<input type='button' class='button' id='wonderplugin-dialog-cancel' value='Cancel' />"+"</div>"+"</div>"+"</div>";
var $slideDialog=$(dialogCode);$("body").append($slideDialog);$(".wonderplugin-dialog").css({"margin-top":String($(document).scrollTop()+60)+"px"});$(".wonderplugin-dialog-bg").css({height:$(document).height()+"px"});if(dialogType==0)$("#wonderplugin-dialog-lightbox").click(function(){var is_checked=$(this).is(":checked");if($("#wonderplugin-dialog-weblink").length){$("#wonderplugin-dialog-weblink").attr("disabled",is_checked);if(is_checked)$("#wonderplugin-dialog-weblink").val("")}if($("#wonderplugin-dialog-linktarget").length){$("#wonderplugin-dialog-linktarget").attr("disabled",
is_checked);if(is_checked)$("#wonderplugin-dialog-linktarget").val("")}$("#wonderplugin-dialog-lightbox-width").attr("disabled",!is_checked);$("#wonderplugin-dialog-lightbox-height").attr("disabled",!is_checked)});$(".wonderplugin-dialog").css({"margin-top":String($(document).scrollTop()+60)+"px"});$(".wonderplugin-dialog-bg").css({height:$(document).height()+"px"});$("#wonderplugin-dialog-title").html("Add "+dialogTitle[dialogType]);if(data){if(dialogType==2||dialogType==3||dialogType==4)$("#wonderplugin-dialog-video").val(data.video);
$("#wonderplugin-dialog-image").val(data.image);if(data.image){$("#wonderplugin-dialog-image-display-tr").css({display:"table-row"});$("#wonderplugin-dialog-image-display").attr("src",data.image)}$("#wonderplugin-dialog-thumbnail").val(data.thumbnail);if(data.displaythumbnail)$("#wonderplugin-dialog-displaythumbnail").attr("checked",true);else $("#wonderplugin-dialog-displaythumbnail").attr("checked",false);$("#wonderplugin-dialog-image-title").val(data.title);$("#wonderplugin-dialog-image-description").val(data.description);
if(dialogType==1){$("#wonderplugin-dialog-mp4").val(data.mp4);$("#wonderplugin-dialog-webm").val(data.webm)}if(dialogType==0){if(data.lightbox){$("#wonderplugin-dialog-weblink").val("");$("#wonderplugin-dialog-linktarget").val("")}else{$("#wonderplugin-dialog-weblink").val(data.weblink);$("#wonderplugin-dialog-linktarget").val(data.linktarget)}$("#wonderplugin-dialog-weblink").attr("disabled",data.lightbox);$("#wonderplugin-dialog-linktarget").attr("disabled",data.lightbox);$("#wonderplugin-dialog-lightbox-width").attr("disabled",
!data.lightbox);$("#wonderplugin-dialog-lightbox-height").attr("disabled",!data.lightbox);if("lightbox"in data)$("#wonderplugin-dialog-lightbox").attr("checked",data.lightbox)}if("lightboxsize"in data)$("#wonderplugin-dialog-lightbox-size").attr("checked",data.lightboxsize);if(data.lightboxwidth)$("#wonderplugin-dialog-lightbox-width").val(data.lightboxwidth);if(data.lightboxheight)$("#wonderplugin-dialog-lightbox-height").val(data.lightboxheight)}if(dialogType==2||dialogType==3||dialogType==4)$("#wonderplugin-dialog-select-video").click(function(){var videoData=
{type:dialogType,video:$.trim($("#wonderplugin-dialog-video").val()),image:$.trim($("#wonderplugin-dialog-image").val()),thumbnail:$.trim($("#wonderplugin-dialog-thumbnail").val()),title:$.trim($("#wonderplugin-dialog-image-title").val()),description:$.trim($("#wonderplugin-dialog-image-description").val())};$slideDialog.remove();onlineVideoDialog(dialogType,function(items){items.map(function(data){wonderplugin_gridgallery_config.slides.push({type:dialogType,image:data.image,thumbnail:data.thumbnail?
data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:true,lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight})});updateMediaTable()},videoData,true,dataIndex)});var media_upload_onclick=function(event){event.preventDefault();var buttonId=$(this).attr("id");var textId=$(this).data("textid");var media_uploader=
wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:dialogType==0&&buttonId=="wonderplugin-dialog-select-image"});media_uploader.on("select",function(event){var selection=media_uploader.state().get("selection");if(dialogType==0&&buttonId=="wonderplugin-dialog-select-image"&&selection.length>1){var items=[];selection.map(function(attachment){attachment=attachment.toJSON();if(attachment.type!="image")return;var thumbnail;var thumbnailsize=$("#wonderplugin-gridgallery-thumbnailsize").text();
if(thumbnailsize&&thumbnailsize.length>0&&attachment.sizes&&attachment.sizes[thumbnailsize]&&attachment.sizes[thumbnailsize].url)thumbnail=attachment.sizes[thumbnailsize].url;else if(attachment.sizes&&attachment.sizes.medium&&attachment.sizes.medium.url)thumbnail=attachment.sizes.medium.url;else if(attachment.sizes&&attachment.sizes.thumbnail&&attachment.sizes.thumbnail.url)thumbnail=attachment.sizes.thumbnail.url;else thumbnail=attachment.url;items.push({image:attachment.url,thumbnail:thumbnail,
displaythumbnail:true,title:attachment.title,description:attachment.description,weblink:"",linktarget:"",lightbox:true,lightboxsize:false,lightboxwidth:640,lightboxheight:480})});$slideDialog.remove();onSuccess(items)}else{attachment=selection.first().toJSON();if(buttonId=="wonderplugin-dialog-select-image"){if(attachment.type!="image"){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select an image file</p>");return}var thumbnail;var thumbnailsize=$("#wonderplugin-gridgallery-thumbnailsize").text();
if(thumbnailsize&&thumbnailsize.length>0&&attachment.sizes&&attachment.sizes[thumbnailsize]&&attachment.sizes[thumbnailsize].url)thumbnail=attachment.sizes[thumbnailsize].url;else if(attachment.sizes&&attachment.sizes.medium&&attachment.sizes.medium.url)thumbnail=attachment.sizes.medium.url;else if(attachment.sizes&&attachment.sizes.thumbnail&&attachment.sizes.thumbnail.url)thumbnail=attachment.sizes.thumbnail.url;else thumbnail=attachment.url;$("#wonderplugin-dialog-image-display-tr").css({display:"table-row"});
$("#wonderplugin-dialog-image-display").attr("src",attachment.url);$("#wonderplugin-dialog-image").val(attachment.url);$("#wonderplugin-dialog-thumbnail").val(thumbnail);if($.trim($("#wonderplugin-dialog-image-title").val()).length<=0)$("#wonderplugin-dialog-image-title").val(attachment.title);if($.trim($("#wonderplugin-dialog-image-description").val()).length<=0)$("#wonderplugin-dialog-image-description").val(attachment.description)}else if(buttonId=="wonderplugin-dialog-select-thumbnail"){if(attachment.type!=
"image"){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select an image file</p>");return}$("#wonderplugin-dialog-thumbnail").val(attachment.url)}else{if(attachment.type!="video"){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select a video file</p>");return}$("#"+textId).val(attachment.url)}}$("#wonderplugin-dialog-error").css({display:"none"}).empty()});media_uploader.open()};if(parseInt($("#wonderplugin-gridgallery-wp-history-media-uploader").text())==
1){var buttonId="";var textId="";var history_media_upload_onclick=function(event){buttonId=$(this).attr("id");textId=$(this).data("textid");var mediaType=buttonId=="wonderplugin-dialog-select-image"||buttonId=="wonderplugin-dialog-select-thumbnail"?"image":"video";tb_show("Upload "+mediaType,"media-upload.php?referer=wonderplugin-gridgallery&type="+mediaType+"&TB_iframe=true",false);return false};window.send_to_editor=function(html){tb_remove();if(buttonId=="wonderplugin-dialog-select-image"){var $img=
$("img",html);if(!$img.length){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select an image file</p>");return}var thumbnail=$img.attr("src");var src=$(html).is("a")?$(html).attr("href"):thumbnail;$("#wonderplugin-dialog-image-display-tr").css({display:"table-row"});$("#wonderplugin-dialog-image-display").attr("src",thumbnail);$("#wonderplugin-dialog-image").val(src);$("#wonderplugin-dialog-thumbnail").val(thumbnail);if($.trim($("#wonderplugin-dialog-image-title").val()).length<=
0)$("#wonderplugin-dialog-image-title").val($("img",html).attr("title"))}else if(buttonId=="wonderplugin-dialog-select-thumbnail"){var $img=$("img",html);if(!$img.length){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select an image file</p>");return}var src=$(html).is("a")?$(html).attr("href"):$img.attr("src");$("#wonderplugin-dialog-thumbnail").val(src)}else{if($("img",html).length){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select a video file</p>");
return}$("#"+textId).val($(html).attr("href"))}$("#wonderplugin-dialog-error").css({display:"none"}).empty()};$("#wonderplugin-dialog-select-image").click(history_media_upload_onclick);$("#wonderplugin-dialog-select-thumbnail").click(history_media_upload_onclick);if(dialogType==1){$("#wonderplugin-dialog-select-mp4").click(history_media_upload_onclick);$("#wonderplugin-dialog-select-webm").click(history_media_upload_onclick)}}else{$("#wonderplugin-dialog-select-image").click(media_upload_onclick);
$("#wonderplugin-dialog-select-thumbnail").click(media_upload_onclick);if(dialogType==1){$("#wonderplugin-dialog-select-mp4").click(media_upload_onclick);$("#wonderplugin-dialog-select-webm").click(media_upload_onclick)}}$("#wonderplugin-dialog-ok").click(function(){if($.trim($("#wonderplugin-dialog-image").val()).length<=0){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select an image file</p>");return}if(dialogType==1&&$.trim($("#wonderplugin-dialog-mp4").val()).length<=
0){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please select a video file</p>");return}var item={image:$.trim($("#wonderplugin-dialog-image").val()),thumbnail:$.trim($("#wonderplugin-dialog-thumbnail").val()),displaythumbnail:$("#wonderplugin-dialog-displaythumbnail").is(":checked"),video:$.trim($("#wonderplugin-dialog-video").val()),mp4:$.trim($("#wonderplugin-dialog-mp4").val()),webm:$.trim($("#wonderplugin-dialog-webm").val()),title:$.trim($("#wonderplugin-dialog-image-title").val()),
description:$.trim($("#wonderplugin-dialog-image-description").val()),weblink:$.trim($("#wonderplugin-dialog-weblink").val()),linktarget:$.trim($("#wonderplugin-dialog-linktarget").val()),lightbox:dialogType==0?$("#wonderplugin-dialog-lightbox").is(":checked"):true,lightboxsize:$("#wonderplugin-dialog-lightbox-size").is(":checked"),lightboxwidth:parseInt($.trim($("#wonderplugin-dialog-lightbox-width").val())),lightboxheight:parseInt($.trim($("#wonderplugin-dialog-lightbox-height").val()))};$slideDialog.remove();
onSuccess([item])});$("#wonderplugin-dialog-cancel").click(function(){$slideDialog.remove()})};var onlineVideoDialog=function(dialogType,onSuccess,videoData,invokeFromSlideDialog,dataIndex){var dialogTitle=["Image","Video","Youtube Video","Vimeo Video","Dailymotion Video"];var dialogExample=["","","https://www.youtube.com/watch?v=wswxQ3mhwqQ","http://vimeo.com/1084537","http://www.dailymotion.com/embed/video/x1yj6t9 or http://dai.ly/x1yj6t9"];var dialogCode="<div class='wonderplugin-dialog-container'>"+
"<div class='wonderplugin-dialog-bg'></div>"+"<div class='wonderplugin-dialog'>"+"<h3 id='wonderplugin-dialog-title'></h3>"+"<div class='error' id='wonderplugin-dialog-error' style='display:none;'></div>"+"<table id='wonderplugin-dialog-form'>"+"<tr>"+"<th>Enter "+dialogTitle[dialogType]+" URL</th>"+"<td><input name='wonderplugin-dialog-video' type='text' id='wonderplugin-dialog-video' value='' class='regular-text' />"+"<p>URL Example: "+dialogExample[dialogType]+"<p>"+"</td>"+"</tr>";dialogCode+=
"</table>"+"<div id='wonderplugin-gridgallery-video-dialog-loading'></div>"+"<div class='wonderplugin-dialog-buttons'>"+"<input type='button' class='button button-primary' id='wonderplugin-dialog-ok' value='OK' />"+"<input type='button' class='button' id='wonderplugin-dialog-cancel' value='Cancel' />"+"</div>"+"</div>"+"</div>";var $videoDialog=$(dialogCode);$("body").append($videoDialog);$(".wonderplugin-dialog").css({"margin-top":String($(document).scrollTop()+60)+"px"});$(".wonderplugin-dialog-bg").css({height:$(document).height()+
"px"});if(!videoData)videoData={type:dialogType};$("#wonderplugin-dialog-title").html("Add "+dialogTitle[dialogType]);var videoDataReturn=function(){$videoDialog.remove();slideDialog(dialogType,function(items){if(items&&items.length>0){if(typeof dataIndex!=="undefined"&&dataIndex>=0)wonderplugin_gridgallery_config.slides.splice(dataIndex,1);items.map(function(data){var result={type:dialogType,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,
video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:data.lightbox,lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight};if(typeof dataIndex!=="undefined"&&dataIndex>=0)wonderplugin_gridgallery_config.slides.splice(dataIndex,0,result);else wonderplugin_gridgallery_config.slides.push(result)});updateMediaTable()}},videoData,dataIndex)};$("#wonderplugin-dialog-ok").click(function(){var href=
$.trim($("#wonderplugin-dialog-video").val());if(href.length<=0){$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please enter a "+dialogTitle[dialogType]+" URL</p>");return}var protocol=window.location.protocol=="https:"?"https:":"http:";if(dialogType==2){var youtubeId="";var regExp=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var match=href.match(regExp);if(match&&match[7]&&match[7].length==11)youtubeId=match[7];else{$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please enter a valid Youtube URL</p>");
return}var result=protocol+"//www.youtube.com/embed/"+youtubeId;var params=getURLParams(href);var first=true;for(var key in params){if(first){result+="?";first=false}else result+="&";result+=key+"="+params[key]}videoData.video=result;videoData.image=protocol+"//img.youtube.com/vi/"+youtubeId+"/0.jpg";videoData.thumbnail=protocol+"//img.youtube.com/vi/"+youtubeId+"/1.jpg";videoDataReturn()}else if(dialogType==3){var vimeoId="";var regExp=/^.*(vimeo\.com\/)((video\/)|(channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;
var match=href.match(regExp);if(match&&match[6])vimeoId=match[6];else{$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please enter a valid Vimeo URL</p>");return}var result=protocol+"//player.vimeo.com/video/"+vimeoId;var params=getURLParams(href);var first=true;for(var key in params){if(first){result+="?";first=false}else result+="&";result+=key+"="+params[key]}videoData.video=result;$("#wonderplugin-gridgallery-video-dialog-loading").css({display:"block"});$.ajax({url:protocol+"//www.vimeo.com/api/v2/video/"+
vimeoId+".json?callback=?",dataType:"json",timeout:3E3,data:{format:"json"},success:function(data){videoData.image=data[0].thumbnail_large;videoData.thumbnail=data[0].thumbnail_medium;videoDataReturn()},error:function(){videoDataReturn()}})}else if(dialogType==4){var dailymotionId="";if(href.match(/\:\/\/.*(dai\.ly)/i))dailymotionId=href.match(/(dai\.ly\/)([a-zA-Z0-9\-\_]+)/)[2];else if(href.match(/dailymotion\.com\/embed\/video\//i))dailymotionId=href.match(/(dailymotion\.com\/embed\/video\/)([a-zA-Z0-9\-\_]+)/)[2];
else{$("#wonderplugin-dialog-error").css({display:"block"}).html("<p>Please enter a valid Dailymotion URL</p>");return}var result=protocol+"//www.dailymotion.com/embed/video/"+dailymotionId;var params=getURLParams(href);var first=true;for(var key in params){if(first){result+="?";first=false}else result+="&";result+=key+"="+params[key]}videoData.video=result;videoData.image=protocol+"//www.dailymotion.com/thumbnail/video/"+dailymotionId;videoData.thumbnail=protocol+"//www.dailymotion.com/thumbnail/video/"+
dailymotionId;videoDataReturn()}});$("#wonderplugin-dialog-cancel").click(function(){$videoDialog.remove();if(invokeFromSlideDialog)videoDataReturn()})};var updateMediaTable=function(){var mediaType=["Image","Video","YouTube","Vimeo","Dailymotion"];$("#wonderplugin-gridgallery-media-table").empty();for(var i=0;i<wonderplugin_gridgallery_config.slides.length;i++)$("#wonderplugin-gridgallery-media-table").append("<li>"+"<div class='wonderplugin-gridgallery-media-table-id'>"+(i+1)+"</div>"+"<div class='wonderplugin-gridgallery-media-table-img'>"+
"<img class='wonderplugin-gridgallery-media-table-image' data-order='"+i+"' src='"+wonderplugin_gridgallery_config.slides[i].thumbnail+"' />"+"</div>"+"<div class='wonderplugin-gridgallery-media-table-type'>"+mediaType[wonderplugin_gridgallery_config.slides[i].type]+"</div>"+"<div class='wonderplugin-gridgallery-media-table-buttons-edit'>"+"<a class='wonderplugin-gridgallery-media-table-button wonderplugin-gridgallery-media-table-edit'>Edit</a>&nbsp;|&nbsp;"+"<a class='wonderplugin-gridgallery-media-table-button wonderplugin-gridgallery-media-table-delete'>Delete</a>"+
"</div>"+"<div class='wonderplugin-gridgallery-media-table-buttons-move'>"+"<a class='wonderplugin-gridgallery-media-table-button wonderplugin-gridgallery-media-table-moveup'>Move Up</a>&nbsp;|&nbsp;"+"<a class='wonderplugin-gridgallery-media-table-button wonderplugin-gridgallery-media-table-movedown'>Move Down</a>"+"</div>"+"<div style='clear:both;'></div>"+"</li>");$(".wonderplugin-gridgallery-media-table-image").wpdraggable(wonderPluginMediaTableMove)};$("#wonderplugin-add-image").click(function(){slideDialog(0,
function(items){items.map(function(data){wonderplugin_gridgallery_config.slides.push({type:0,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:data.lightbox,lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight})});updateMediaTable()})});$("#wonderplugin-add-video").click(function(){slideDialog(1,
function(items){items.map(function(data){wonderplugin_gridgallery_config.slides.push({type:1,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:true,lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight})});updateMediaTable()})});$("#wonderplugin-add-youtube").click(function(){onlineVideoDialog(2,
function(items){items.map(function(data){wonderplugin_gridgallery_config.slides.push({type:2,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:true,lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight})});updateMediaTable()})});$("#wonderplugin-add-vimeo").click(function(){onlineVideoDialog(3,
function(items){items.map(function(data){wonderplugin_gridgallery_config.slides.push({type:2,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:true,lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight})});updateMediaTable()})});$("#wonderplugin-add-dailymotion").click(function(){onlineVideoDialog(4,
function(items){items.map(function(data){wonderplugin_gallery_config.slides.push({type:2,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,video:data.video,mp4:data.mp4,hdmp4:data.hdmp4,webm:data.webm,hdwebm:data.hdwebm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget})});updateMediaTable()})});$(document).on("click",".wonderplugin-gridgallery-media-table-edit",function(){var index=$(this).parent().parent().index();var mediaType=wonderplugin_gridgallery_config.slides[index].type;
slideDialog(mediaType,function(items){if(items&&items.length>0){wonderplugin_gridgallery_config.slides.splice(index,1);items.map(function(data){wonderplugin_gridgallery_config.slides.splice(index,0,{type:mediaType,image:data.image,thumbnail:data.thumbnail?data.thumbnail:data.image,displaythumbnail:data.displaythumbnail,video:data.video,mp4:data.mp4,webm:data.webm,title:data.title,description:data.description,weblink:data.weblink,linktarget:data.linktarget,lightbox:mediaType==0?data.lightbox:true,
lightboxsize:data.lightboxsize,lightboxwidth:data.lightboxwidth,lightboxheight:data.lightboxheight})});updateMediaTable()}},wonderplugin_gridgallery_config.slides[index],index)});$(document).on("click",".wonderplugin-gridgallery-media-table-delete",function(){var $tr=$(this).parent().parent();var index=$tr.index();wonderplugin_gridgallery_config.slides.splice(index,1);$tr.remove();$("#wonderplugin-gridgallery-media-table").find("li").each(function(index){$(this).find(".wonderplugin-gridgallery-media-table-id").text(index+
1);$(this).find("img").data("order",index);$(this).find("img").css({top:0,left:0})})});var wonderPluginMediaTableMove=function(i,j){var len=wonderplugin_gridgallery_config.slides.length;if(j<0)j=0;if(j>len-1)j=len-1;if(i==j){$("#wonderplugin-gridgallery-media-table").find("li").eq(i).find("img").css({top:0,left:0});return}var $tr=$("#wonderplugin-gridgallery-media-table").find("li").eq(i);var data=wonderplugin_gridgallery_config.slides[i];wonderplugin_gridgallery_config.slides.splice(i,1);wonderplugin_gridgallery_config.slides.splice(j,
0,data);var $trj=$("#wonderplugin-gridgallery-media-table").find("li").eq(j);$tr.remove();if(j>i)$trj.after($tr);else $trj.before($tr);$("#wonderplugin-gridgallery-media-table").find("li").each(function(index){$(this).find(".wonderplugin-gridgallery-media-table-id").text(index+1);$(this).find("img").data("order",index);$(this).find("img").css({top:0,left:0})});$tr.find("img").wpdraggable(wonderPluginMediaTableMove)};$(document).on("click",".wonderplugin-gridgallery-media-table-moveup",function(){var $tr=
$(this).parent().parent();var index=$tr.index();var data=wonderplugin_gridgallery_config.slides[index];wonderplugin_gridgallery_config.slides.splice(index,1);if(index==0){wonderplugin_gridgallery_config.slides.push(data);var $last=$tr.parent().find("li:last");$tr.remove();$last.after($tr)}else{wonderplugin_gridgallery_config.slides.splice(index-1,0,data);var $prev=$tr.prev();$tr.remove();$prev.before($tr)}$("#wonderplugin-gridgallery-media-table").find("li").each(function(index){$(this).find(".wonderplugin-gridgallery-media-table-id").text(index+
1);$(this).find("img").data("order",index);$(this).find("img").css({top:0,left:0})});$tr.find("img").wpdraggable(wonderPluginMediaTableMove)});$(document).on("click",".wonderplugin-gridgallery-media-table-movedown",function(){var $tr=$(this).parent().parent();var index=$tr.index();var len=wonderplugin_gridgallery_config.slides.length;var data=wonderplugin_gridgallery_config.slides[index];wonderplugin_gridgallery_config.slides.splice(index,1);if(index==len-1){wonderplugin_gridgallery_config.slides.unshift(data);
var $first=$tr.parent().find("li:first");$tr.remove();$first.before($tr)}else{wonderplugin_gridgallery_config.slides.splice(index+1,0,data);var $next=$tr.next();$tr.remove();$next.after($tr)}$("#wonderplugin-gridgallery-media-table").find("li").each(function(index){$(this).find(".wonderplugin-gridgallery-media-table-id").text(index+1);$(this).find("img").data("order",index);$(this).find("img").css({top:0,left:0})});$tr.find("img").wpdraggable(wonderPluginMediaTableMove)});var configSkinOptions={width:200,
height:150,googleanalyticsaccount:"",random:false,circularimage:false,firstimage:false,showtitle:false,titlemode:"mouseover",titleeffect:"slide",titleeffectduration:300,shownavigation:true,thumbwidth:90,thumbheight:60,thumbtopmargin:12,thumbbottommargin:4,barheight:64,lightboxresponsive:true,lightboxshowtitle:true,titlebottomcss:"{color:#333; font-size:14px; font-family:Armata,sans-serif,Arial; overflow:hidden; text-align:left;}",lightboxshowdescription:false,descriptionbottomcss:"{color:#333; font-size:12px; font-family:Arial,Helvetica,sans-serif; overflow:hidden; text-align:left; margin:4px 0px 0px; padding: 0px;}"};
var defaultSkinOptions={};for(var key in WONDERPLUGIN_GRIDGALLERY_SKIN_TEMPLATE){defaultSkinOptions[key]={};for(var option in configSkinOptions)defaultSkinOptions[key][option]=configSkinOptions[option];for(var option in WONDERPLUGIN_GRIDGALLERY_SKIN_TEMPLATE[key])defaultSkinOptions[key][option]=WONDERPLUGIN_GRIDGALLERY_SKIN_TEMPLATE[key][option]}var defaultStyleOptions={};for(var key in WONDERPLUGIN_GRIDGALLERY_STYLE_TEMPLATE){defaultStyleOptions[key]={};for(var option in configSkinOptions)defaultStyleOptions[key][option]=
configSkinOptions[option];for(var option in WONDERPLUGIN_GRIDGALLERY_STYLE_TEMPLATE[key])defaultStyleOptions[key][option]=WONDERPLUGIN_GRIDGALLERY_STYLE_TEMPLATE[key][option]}var printSkinOptions=function(options){$("#wonderplugin-gridgallery-responsive").attr("checked",options.responsive);$("#wonderplugin-gridgallery-column").val(options.column);$("#wonderplugin-gridgallery-gridtemplate").val(options.gridtemplate);$("#wonderplugin-gridgallery-mediumscreen").attr("checked",options.mediumscreen);$("#wonderplugin-gridgallery-mediumcolumn").val(options.mediumcolumn);
$("#wonderplugin-gridgallery-mediumscreensize").val(options.mediumscreensize);$("#wonderplugin-gridgallery-smallscreen").attr("checked",options.smallscreen);$("#wonderplugin-gridgallery-smallcolumn").val(options.smallcolumn);$("#wonderplugin-gridgallery-smallscreensize").val(options.smallscreensize)};var printStyleOptions=function(options){$("#wonderplugin-gridgallery-width").val(options.width);$("#wonderplugin-gridgallery-height").val(options.height);$("#wonderplugin-gridgallery-random").attr("checked",
options.random);$("#wonderplugin-gridgallery-circularimage").attr("checked",options.circularimage);$("#wonderplugin-gridgallery-firstimage").attr("checked",options.firstimage);$("#wonderplugin-gridgallery-showtitle").attr("checked",options.showtitle);$("#wonderplugin-gridgallery-titlemode").val(options.titlemode);$("#wonderplugin-gridgallery-titleeffect").val(options.titleeffect);$("#wonderplugin-gridgallery-titleeffectduration").val(options.titleeffectduration);$("#wonderplugin-gridgallery-hoverzoomin").attr("checked",
options.hoverzoomin);$("#wonderplugin-gridgallery-hoverzoominvalue").val(options.hoverzoominvalue);$("#wonderplugin-gridgallery-hoverzoominduration").val(options.hoverzoominduration);$("#wonderplugin-gridgallery-googleanalyticsaccount").val(options.googleanalyticsaccount);$("#wonderplugin-gridgallery-gap").val(options.gap);$("#wonderplugin-gridgallery-margin").val(options.margin);$("#wonderplugin-gridgallery-borderradius").val(options.borderradius);$("#wonderplugin-gridgallery-videoplaybutton").val(options.videoplaybutton);
$("#wonderplugin-gridgallery-displayvideoplaybutton").attr("src",$("#wonderplugin-gridgallery-jsfolder").text()+"skins/default/"+options.videoplaybutton);$("#wonderplugin-gridgallery-skincss").val(options.skincss)};var printOptions=function(options){$("#wonderplugin-gridgallery-shownavigation").attr("checked",options.shownavigation);$("#wonderplugin-gridgallery-lightboxresponsive").attr("checked",options.lightboxresponsive);$("#wonderplugin-gridgallery-lightboxshowtitle").attr("checked",options.lightboxshowtitle);
$("#wonderplugin-gridgallery-lightboxshowdescription").attr("checked",options.lightboxshowdescription);$("#wonderplugin-gridgallery-thumbwidth").val(options.thumbwidth);$("#wonderplugin-gridgallery-thumbheight").val(options.thumbheight);$("#wonderplugin-gridgallery-thumbtopmargin").val(options.thumbtopmargin);$("#wonderplugin-gridgallery-thumbbottommargin").val(options.thumbbottommargin);$("#wonderplugin-gridgallery-barheight").val(options.barheight);$("#wonderplugin-gridgallery-titlebottomcss").val(options.titlebottomcss);
$("#wonderplugin-gridgallery-descriptionbottomcss").val(options.descriptionbottomcss);printSkinOptions(options);printStyleOptions(options)};$("input:radio[name=wonderplugin-gridgallery-skin]").click(function(){if($(this).val()==wonderplugin_gridgallery_config.skin)return;$(".wonderplugin-tab-skin").find("img").removeClass("selected");$("input:radio[name=wonderplugin-gridgallery-skin]:checked").parent().find("img").addClass("selected");wonderplugin_gridgallery_config.skin=$(this).val();printSkinOptions(defaultSkinOptions[$(this).val()])});
$("input:radio[name=wonderplugin-gridgallery-style]").click(function(){if($(this).val()==wonderplugin_gridgallery_config.style)return;$(".wonderplugin-tab-style").find("img").removeClass("selected");$("input:radio[name=wonderplugin-gridgallery-style]:checked").parent().find("img").addClass("selected");wonderplugin_gridgallery_config.style=$(this).val();printStyleOptions(defaultStyleOptions[$(this).val()])});$(".wonderplugin-gridgallery-options-menu-item").each(function(index){$(this).click(function(){if($(this).hasClass("wonderplugin-gridgallery-options-menu-item-selected"))return;
$(".wonderplugin-gridgallery-options-menu-item").removeClass("wonderplugin-gridgallery-options-menu-item-selected");$(this).addClass("wonderplugin-gridgallery-options-menu-item-selected");$(".wonderplugin-gridgallery-options-tab").removeClass("wonderplugin-gridgallery-options-tab-selected");$(".wonderplugin-gridgallery-options-tab").eq(index).addClass("wonderplugin-gridgallery-options-tab-selected")})});var updateGridgalleryOptions=function(){wonderplugin_gridgallery_config.name=$.trim($("#wonderplugin-gridgallery-name").val());
wonderplugin_gridgallery_config.skin=$("input:radio[name=wonderplugin-gridgallery-skin]:checked").val();wonderplugin_gridgallery_config.style=$("input:radio[name=wonderplugin-gridgallery-style]:checked").val();wonderplugin_gridgallery_config.width=parseInt($.trim($("#wonderplugin-gridgallery-width").val()));wonderplugin_gridgallery_config.height=parseInt($.trim($("#wonderplugin-gridgallery-height").val()));wonderplugin_gridgallery_config.googleanalyticsaccount=$.trim($("#wonderplugin-gridgallery-googleanalyticsaccount").val());
wonderplugin_gridgallery_config.gap=parseInt($.trim($("#wonderplugin-gridgallery-gap").val()));wonderplugin_gridgallery_config.margin=parseInt($.trim($("#wonderplugin-gridgallery-margin").val()));wonderplugin_gridgallery_config.borderradius=parseInt($.trim($("#wonderplugin-gridgallery-borderradius").val()));wonderplugin_gridgallery_config.hoverzoomin=$("#wonderplugin-gridgallery-hoverzoomin").is(":checked");wonderplugin_gridgallery_config.hoverzoominvalue=parseInt($.trim($("#wonderplugin-gridgallery-hoverzoominvalue").val()));
wonderplugin_gridgallery_config.hoverzoominduration=parseInt($.trim($("#wonderplugin-gridgallery-hoverzoominduration").val()));wonderplugin_gridgallery_config.videoplaybutton=$.trim($("#wonderplugin-gridgallery-videoplaybutton").val());wonderplugin_gridgallery_config.random=$("#wonderplugin-gridgallery-random").is(":checked");wonderplugin_gridgallery_config.circularimage=$("#wonderplugin-gridgallery-circularimage").is(":checked");wonderplugin_gridgallery_config.firstimage=$("#wonderplugin-gridgallery-firstimage").is(":checked");
wonderplugin_gridgallery_config.showtitle=$("#wonderplugin-gridgallery-showtitle").is(":checked");wonderplugin_gridgallery_config.titlemode=$("#wonderplugin-gridgallery-titlemode").val();wonderplugin_gridgallery_config.titleeffect=$("#wonderplugin-gridgallery-titleeffect").val();wonderplugin_gridgallery_config.titleeffectduration=parseInt($.trim($("#wonderplugin-gridgallery-titleeffectduration").val()));wonderplugin_gridgallery_config.responsive=$("#wonderplugin-gridgallery-responsive").is(":checked");
wonderplugin_gridgallery_config.column=parseInt($.trim($("#wonderplugin-gridgallery-column").val()));wonderplugin_gridgallery_config.gridtemplate=$.trim($("#wonderplugin-gridgallery-gridtemplate").val()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");wonderplugin_gridgallery_config.mediumcolumn=parseInt($.trim($("#wonderplugin-gridgallery-mediumcolumn").val()));wonderplugin_gridgallery_config.mediumscreen=$("#wonderplugin-gridgallery-mediumscreen").is(":checked");wonderplugin_gridgallery_config.mediumscreensize=
parseInt($.trim($("#wonderplugin-gridgallery-mediumscreensize").val()));wonderplugin_gridgallery_config.smallcolumn=parseInt($.trim($("#wonderplugin-gridgallery-smallcolumn").val()));wonderplugin_gridgallery_config.smallscreen=$("#wonderplugin-gridgallery-smallscreen").is(":checked");wonderplugin_gridgallery_config.smallscreensize=parseInt($.trim($("#wonderplugin-gridgallery-smallscreensize").val()));wonderplugin_gridgallery_config.skincss=$.trim($("#wonderplugin-gridgallery-skincss").val());wonderplugin_gridgallery_config.customcss=
$.trim($("#wonderplugin-gridgallery-custom-css").val());wonderplugin_gridgallery_config.dataoptions=$.trim($("#wonderplugin-gridgallery-data-options").val());wonderplugin_gridgallery_config.shownavigation=$("#wonderplugin-gridgallery-shownavigation").is(":checked");wonderplugin_gridgallery_config.thumbwidth=parseInt($.trim($("#wonderplugin-gridgallery-thumbwidth").val()));wonderplugin_gridgallery_config.thumbheight=parseInt($.trim($("#wonderplugin-gridgallery-thumbheight").val()));wonderplugin_gridgallery_config.thumbtopmargin=
parseInt($.trim($("#wonderplugin-gridgallery-thumbtopmargin").val()));wonderplugin_gridgallery_config.thumbbottommargin=parseInt($.trim($("#wonderplugin-gridgallery-thumbbottommargin").val()));wonderplugin_gridgallery_config.barheight=parseInt($.trim($("#wonderplugin-gridgallery-barheight").val()));wonderplugin_gridgallery_config.lightboxresponsive=$("#wonderplugin-gridgallery-lightboxresponsive").is(":checked");wonderplugin_gridgallery_config.lightboxshowtitle=$("#wonderplugin-gridgallery-lightboxshowtitle").is(":checked");
wonderplugin_gridgallery_config.titlebottomcss=$.trim($("#wonderplugin-gridgallery-titlebottomcss").val());wonderplugin_gridgallery_config.lightboxshowdescription=$("#wonderplugin-gridgallery-lightboxshowdescription").is(":checked");wonderplugin_gridgallery_config.descriptionbottomcss=$.trim($("#wonderplugin-gridgallery-descriptionbottomcss").val());for(var i=0;i<wonderplugin_gridgallery_config.slides.length;i++)if(wonderplugin_gridgallery_config.slides[i].type==1||wonderplugin_gridgallery_config.slides[i].type==
2||wonderplugin_gridgallery_config.slides[i].type==3||wonderplugin_gridgallery_config.slides[i].type==4)wonderplugin_gridgallery_config.slides[i].lightbox=true};var previewGridgallery=function(){updateGridgalleryOptions();$("#wonderplugin-gridgallery-preview-container").empty();var previewCode="<div id='wonderplugin-gridgallery-preview'";if(wonderplugin_gridgallery_config.dataoptions&&wonderplugin_gridgallery_config.dataoptions.length>0)previewCode+=" "+wonderplugin_gridgallery_config.dataoptions;
previewCode+="></div>";$("#wonderplugin-gridgallery-preview-container").html(previewCode);if(wonderplugin_gridgallery_config.slides.length>0){$("head").find("style").each(function(){if($(this).data("creator")=="wonderplugingridgallerycreator")$(this).remove()});var gridgalleryid=wonderplugin_gridgallery_config.id>0?wonderplugin_gridgallery_config.id:0;if(wonderplugin_gridgallery_config.customcss&&wonderplugin_gridgallery_config.customcss.length>0){var customcss=wonderplugin_gridgallery_config.customcss.replace("GRIDGALLERYID",
gridgalleryid);$("head").append("<style type='text/css' data-creator='wonderplugingridgallerycreator'>"+customcss+"</style>")}if(wonderplugin_gridgallery_config.skincss&&wonderplugin_gridgallery_config.skincss.length>0)$("head").append("<style type='text/css' data-creator='wonderplugingridgallerycreator'>"+wonderplugin_gridgallery_config.skincss.replace(/#wonderplugingridgallery-GRIDGALLERYID/g,"#wonderplugin-gridgallery-preview")+"</style>");var code='<div class="wonderplugin-gridgallery-list" style="display:block;position:relative;max-width:100%;margin:0 auto;">';
var templates=wonderplugin_gridgallery_config.gridtemplate.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");templates=templates.match(/<div\s.+?<\/div>/g);var slidelist=wonderplugin_gridgallery_config.slides.slice(0);var slidelen=slidelist.length;if(wonderplugin_gridgallery_config.random)for(var i=slidelen-1;i>0;i--){if(i==1&&Math.random()<0.5)break;var index=Math.floor(Math.random()*i);var temp=slidelist[index];slidelist[index]=slidelist[i];slidelist[i]=temp}var j=0;for(var i=0;i<
slidelist.length;i++){var code_template='<div class="wonderplugin-gridgallery-item-container">';if(slidelist[i].lightbox){code_template+='<a class="wpgridlightbox-'+gridgalleryid+'" data-group="wpgridgallery-'+gridgalleryid+'" data-thumbnail="'+slidelist[i].thumbnail+'"';if(slidelist[i].type==0)code_template+=' href="'+slidelist[i].image+'"';else if(slidelist[i].type==1){code_template+=' href="'+slidelist[i].mp4+'"';if(slidelist[i].webm)code_template+=' data-webm="'+slidelist[i].webm+'"'}else if(slidelist[i].type==
2||slidelist[i].type==3||slidelist[i].type==4)code_template+=' href="'+slidelist[i].video+'"';if(slidelist[i].lightboxsize)code_template+=' data-width="'+slidelist[i].lightboxwidth+'" data-height="'+slidelist[i].lightboxheight+'"'}else{code_template+='<a href="'+slidelist[i].weblink+'"';if(slidelist[i].linktarget&&slidelist[i].linktarget.length>0)code_template+=' target="'+slidelist[i].linktarget+'"'}if(slidelist[i].title&&slidelist[i].title.length>0)code_template+=' title="'+slidelist[i].title.replace(/"/g,
"&quot;")+'"';if(slidelist[i].description&&slidelist[i].description.length>0)code_template+=' data-description="'+slidelist[i].description.replace(/"/g,"&quot;")+'"';code_template+=">";code_template+='<img src="';if(slidelist[i].displaythumbnail)code_template+=slidelist[i].thumbnail;else code_template+=slidelist[i].image;code_template+='" />';code_template+="</a>";code_template+="</div>";var div_item=wonderplugin_gridgallery_config.firstimage&&i>0?'<div class="wonderplugin-gridgallery-item" style="display:none;"':
'<div class="wonderplugin-gridgallery-item"';code+=templates[j].replace("<div",div_item).replace("</div>",code_template+"</div>");j++;if(j>=templates.length)j=0}code+='<div style="clear:both;"></div>';code+="</div>";var jsfolder=$("#wonderplugin-gridgallery-jsfolder").text();var gridgalleryOptions=$.extend({},{gridgalleryid:gridgalleryid,jsfolder:jsfolder,skinsfoldername:"skins/default/"},wonderplugin_gridgallery_config);var totalwidth=wonderplugin_gridgallery_config.firstimage?gridgalleryOptions.width:
gridgalleryOptions.width*gridgalleryOptions.column+gridgalleryOptions.gap*(gridgalleryOptions.column-1);if(gridgalleryOptions.responsive)$("#wonderplugin-gridgallery-preview").css({display:"none",position:"relative",width:"100%","max-width":totalwidth+"px"});else $("#wonderplugin-gridgallery-preview").css({display:"none",position:"relative",width:totalwidth+"px"});$("#wonderplugin-gridgallery-preview").html(code);$("#wonderplugin-gridgallery-preview").wonderplugingridgallery(gridgalleryOptions)}};
var publishGridgallery=function(){$("#wonderplugin-gridgallery-publish-loading").show();updateGridgalleryOptions();jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"wonderplugin_gridgallery_save_config",item:JSON.stringify(wonderplugin_gridgallery_config)},success:function(data){$("#wonderplugin-gridgallery-publish-loading").hide();if(data.success&&data.id>=0){wonderplugin_gridgallery_config.id=data.id;$("#wonderplugin-gridgallery-publish-information").html("<div class='updated'><p>The gridgallery has been saved and published.</p></div>"+
"<div class='updated'><p>To embed the gridgallery into your page or post, use shortcode <b>[wonderplugin_gridgallery id=\""+data.id+'"]</b></p></div>'+"<div class='updated'><p>To embed the gridgallery into your template, use php code <b>&lt;?php echo do_shortcode('[wonderplugin_gridgallery id=\""+data.id+"\"]'); ?&gt;</b></p></div>")}else{wonderplugin_gridgallery_config.gridtemplate=wonderplugin_gridgallery_config.gridtemplate.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;");var errorHtml=
"<div class='error'><p>WordPress Ajax call failed. Please check your WordPress configuration file and make sure the WP_DEBUG is set to false.</p></div>";errorHtml+="<div class='error'><p>Or you can click the button below and save the gallery with POST method</p></div>";errorHtml+="<form method='post'>";errorHtml+="<input type='hidden' name='wonderplugin-gridgallery-save-item-post-value' id='wonderplugin-gridgallery-save-item-post-value' value='"+JSON.stringify(wonderplugin_gridgallery_config).replace(/"/g,
"&quot;").replace(/'/g,"&#39;")+"' />";errorHtml+="<p class='submit'><input type='submit' name='wonderplugin-gridgallery-save-item-post' id='wonderplugin-gridgallery-save-item-post' class='button button-primary' value='Save & Publish with Post Method'  /></p>";errorHtml+="</form>";$("#wonderplugin-gridgallery-publish-information").html(errorHtml)}}})};var default_options={id:-1,name:"My Gridgallery",slides:[],skin:"tiles",style:"classic",customcss:"",dataoptions:""};var wonderplugin_gridgallery_config=
$.extend({},default_options,defaultSkinOptions[default_options["skin"]],defaultStyleOptions[default_options["style"]]);var gridgalleryId=parseInt($("#wonderplugin-gridgallery-id").text());if(gridgalleryId>=0){var saved_config=$.parseJSON($("#wonderplugin-gridgallery-id-config").text());if(saved_config.skin=="withborder"){saved_config.skin="tiles";saved_config.style="border"}$.extend(wonderplugin_gridgallery_config,saved_config);wonderplugin_gridgallery_config.id=gridgalleryId}var i;var j;for(i=0;i<
wonderplugin_gridgallery_config.slides.length;i++){if(!("lightboxsize"in wonderplugin_gridgallery_config.slides[i]))wonderplugin_gridgallery_config.slides[i]["lightboxsize"]=false;if(!("lightboxwidth"in wonderplugin_gridgallery_config.slides[i]))wonderplugin_gridgallery_config.slides[i]["lightboxwidth"]=960;if(!("lightboxheight"in wonderplugin_gridgallery_config.slides[i]))wonderplugin_gridgallery_config.slides[i]["lightboxheight"]=540}var slideBoolOptions=["lightbox","lightboxsize","displaythumbnail"];
for(i=0;i<wonderplugin_gridgallery_config.slides.length;i++)for(j=0;j<slideBoolOptions.length;j++)if(wonderplugin_gridgallery_config.slides[i][slideBoolOptions[j]]!==true&&wonderplugin_gridgallery_config.slides[i][slideBoolOptions[j]]!==false)wonderplugin_gridgallery_config.slides[i][slideBoolOptions[j]]=wonderplugin_gridgallery_config.slides[i][slideBoolOptions[j]]&&wonderplugin_gridgallery_config.slides[i][slideBoolOptions[j]].toLowerCase()==="true";var boolOptions=["random","showtitle","responsive",
"hoverzoomin","shownavigation","mediumscreen","smallscreen","lightboxresponsive","lightboxshowtitle","lightboxshowdescription","circularimage","firstimage"];for(i=0;i<boolOptions.length;i++)if(wonderplugin_gridgallery_config[boolOptions[i]]!==true&&wonderplugin_gridgallery_config[boolOptions[i]]!==false)wonderplugin_gridgallery_config[boolOptions[i]]=wonderplugin_gridgallery_config[boolOptions[i]]&&wonderplugin_gridgallery_config[boolOptions[i]].toLowerCase()==="true";if(wonderplugin_gridgallery_config.dataoptions&&
wonderplugin_gridgallery_config.dataoptions.length>0)wonderplugin_gridgallery_config.dataoptions=wonderplugin_gridgallery_config.dataoptions.replace(/\\"/g,'"').replace(/\\'/g,"'");var printConfig=function(){$("#wonderplugin-gridgallery-name").val(wonderplugin_gridgallery_config.name);updateMediaTable();$(".wonderplugin-tab-skin").find("img").removeClass("selected");$("input:radio[name=wonderplugin-gridgallery-skin][value="+wonderplugin_gridgallery_config.skin+"]").attr("checked",true);$("input:radio[name=wonderplugin-gridgallery-skin][value="+
wonderplugin_gridgallery_config.skin+"]").parent().find("img").addClass("selected");$(".wonderplugin-tab-style").find("img").removeClass("selected");$("input:radio[name=wonderplugin-gridgallery-style][value="+wonderplugin_gridgallery_config.style+"]").attr("checked",true);$("input:radio[name=wonderplugin-gridgallery-style][value="+wonderplugin_gridgallery_config.style+"]").parent().find("img").addClass("selected");printOptions(wonderplugin_gridgallery_config);$("#wonderplugin-gridgallery-custom-css").val(wonderplugin_gridgallery_config.customcss);
$("#wonderplugin-gridgallery-data-options").val(wonderplugin_gridgallery_config.dataoptions)};printConfig()});$.fn.wpdraggable=function(callback){this.css("cursor","move").on("mousedown",function(e){var $dragged=$(this);var x=$dragged.offset().left-e.pageX;var y=$dragged.offset().top-e.pageY;var z=$dragged.css("z-index");$(document).on("mousemove.wpdraggable",function(e){$dragged.css({"z-index":999}).offset({left:x+e.pageX,top:y+e.pageY});e.preventDefault()}).one("mouseup",function(){$(this).off("mousemove.wpdraggable click.wpdraggable");
$dragged.css("z-index",z);var i=$dragged.data("order");var coltotal=Math.floor($dragged.parent().parent().parent().innerWidth()/$dragged.parent().parent().outerWidth());var row=Math.floor(($dragged.offset().top-$dragged.parent().parent().parent().offset().top)/$dragged.parent().parent().outerHeight());var col=Math.floor(($dragged.offset().left-$dragged.parent().parent().parent().offset().left)/$dragged.parent().parent().outerWidth());var j=row*coltotal+col;callback(i,j)});e.preventDefault()});return this}})(jQuery);
